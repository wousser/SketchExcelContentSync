{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://exports/./node_modules/@babel/runtime/helpers/createClass.js","webpack://exports/./node_modules/@skpm/dialog/lib/index.js","webpack://exports/./node_modules/@skpm/dialog/lib/message-box.js","webpack://exports/./node_modules/@skpm/dialog/lib/open-dialog.js","webpack://exports/./node_modules/@skpm/dialog/lib/save-dialog.js","webpack://exports/./node_modules/@skpm/dialog/lib/utils.js","webpack://exports/./node_modules/@skpm/fs/index.js","webpack://exports/./node_modules/@skpm/fs/utils.js","webpack://exports/./node_modules/@skpm/promise/index.js","webpack://exports/./node_modules/xlsx/xlsx.mjs","webpack://exports/./src/constants.js","webpack://exports/./src/generate-content-file.js","webpack://exports/external \"buffer\"","webpack://exports/external \"path\"","webpack://exports/external \"sketch\"","webpack://exports/external \"sketch/ui\""],"names":["excelDivider","sketchSymbolDivider","artboardPrefix","translateLayerPrefix","module","exports","UI","require","constants","path","XLSX","document","sketch","getSelectedDocument","contentLanguage","renameTextLayersFlag","generatedFileData","duplicateKeys","console","log","ExcelContent","key","value","pages","askContentLanguage","askRenameTextLayers","page","name","renameTextLayers","getPageContent","saveToFile","message","layers","layer","findContentLayer","type","String","Types","SymbolInstance","contentFromSymbolLayer","Text","contentFromTextLayer","Artboard","contentFromArtboardLayer","eachLayer","symbol","charAt","overrides","override","property","id","layerNamesFromPath","addToSheet","getParentArtboard","text","artboard","artboardDivider","keyValue","push","findTextAndSymbolLayer","returnValue","getInputFromUser","INPUT_TYPE","selection","possibleValues","initialValue","err","length","date","Date","dateFormat","getFullYear","getMonth","getDate","decodeURI","basename","contentFileName","defaultPath","join","dirname","filePath","dialog","showSaveDialog","filters","extensions","book","utils","book_new","sheet","json_to_sheet","v","book_append_sheet","content","write","bookType","bookSST","fs","writeFileSync","encoding","layerNames","layerIDs","split","layerID","getLayerWithID","layerName"],"mappings":";;;;;;;;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;AClFA;AACA;AACA;AACA;AACA;;AAEA,+G;;;;;;;;;;;ACNA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA,4G;;;;;;;;;;;ACnBA;AACA;;AAEA;AACA,kBAAkB,mBAAO,CAAC,qEAAe;AACzC,sBAAsB,mBAAO,CAAC,qEAAe;AAC7C,kBAAkB,mBAAO,CAAC,qEAAe;AACzC,sBAAsB,mBAAO,CAAC,qEAAe;AAC7C,kBAAkB,mBAAO,CAAC,qEAAe;AACzC,sBAAsB,mBAAO,CAAC,qEAAe;AAC7C;AACA;;;;;;;;;;;;ACXA;AACA,YAAY,mBAAO,CAAC,yDAAS;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;;;;;;;;;;ACnIA;AACA,YAAY,mBAAO,CAAC,yDAAS;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,iBAAiB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,iBAAiB;AACtC;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;;;;;;;;;;AClHA;AACA,YAAY,mBAAO,CAAC,yDAAS;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;;;;;;;;;;AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;AC9DA;AACA;AACA,aAAa,mBAAO,CAAC,sBAAQ;AAC7B,YAAY,mBAAO,CAAC,iDAAS;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB,OAAO;AAC1B;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;;;;;;ACpbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,sBAAsB,mBAAO,CAAC,iDAAS;AACvC;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC9JA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;;AAEA;AACA;AACA,WAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA,aAAa,SAAS;AACtB;AACA,aAAa,kBAAkB;AAC/B;AACA,aAAa,kBAAkB;AAC/B;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA,+CAA+C,SAAS;AACxD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA,mBAAmB,iBAAiB;AACpC;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC,SAAS;AAC9C;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AA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","file":"__generate-content-file.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/generate-content-file.js\");\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","/* let's try to match the API from Electron's Dialog\n(https://github.com/electron/electron/blob/master/docs/api/dialog.md) */\n\nmodule.exports = {\n  showOpenDialog: require('./open-dialog').openDialog,\n  showOpenDialogSync: require('./open-dialog').openDialogSync,\n  showSaveDialog: require('./save-dialog').saveDialog,\n  showSaveDialogSync: require('./save-dialog').saveDialogSync,\n  showMessageBox: require('./message-box').messageBox,\n  showMessageBoxSync: require('./message-box').messageBoxSync,\n  // showErrorBox: require('./error-box'),\n}\n","/* eslint-disable no-not-accumulator-reassign/no-not-accumulator-reassign */\nvar utils = require('./utils')\n\nvar typeMap = {\n  none: 0,\n  info: 1,\n  error: 2,\n  question: 1,\n  warning: 2,\n}\n\nfunction setupOptions(document, options) {\n  if (\n    !document ||\n    (typeof document.isKindOfClass !== 'function' && !document.sketchObject)\n  ) {\n    options = document\n    document = undefined\n  } else if (document.sketchObject) {\n    document = document.sketchObject\n  }\n  if (!options) {\n    options = {}\n  }\n\n  var dialog = NSAlert.alloc().init()\n\n  if (options.type) {\n    dialog.alertStyle = typeMap[options.type] || 0\n  }\n\n  if (options.buttons && options.buttons.length) {\n    options.buttons.forEach(function addButton(button) {\n      dialog.addButtonWithTitle(\n        options.normalizeAccessKeys ? button.replace(/&/g, '') : button\n      )\n      // TODO: add keyboard shortcut if options.normalizeAccessKeys\n    })\n  }\n\n  if (typeof options.defaultId !== 'undefined') {\n    var buttons = dialog.buttons()\n    if (options.defaultId < buttons.length) {\n      // Focus the button at defaultId if the user opted to do so.\n      // The first button added gets set as the default selected.\n      // So remove that default, and make the requested button the default.\n      buttons[0].setKeyEquivalent('')\n      buttons[options.defaultId].setKeyEquivalent('\\r')\n    }\n  }\n\n  if (options.title) {\n    // not shown on macOS\n  }\n\n  if (options.message) {\n    dialog.messageText = options.message\n  }\n\n  if (options.detail) {\n    dialog.informativeText = options.detail\n  }\n\n  if (options.checkboxLabel) {\n    dialog.showsSuppressionButton = true\n    dialog.suppressionButton().title = options.checkboxLabel\n\n    if (typeof options.checkboxChecked !== 'undefined') {\n      dialog.suppressionButton().state = options.checkboxChecked\n        ? NSOnState\n        : NSOffState\n    }\n  }\n\n  if (options.icon) {\n    if (typeof options.icon === 'string') {\n      options.icon = NSImage.alloc().initWithContentsOfFile(options.icon)\n    }\n    dialog.icon = options.icon\n  } else if (\n    typeof __command !== 'undefined' &&\n    __command.pluginBundle() &&\n    __command.pluginBundle().icon()\n  ) {\n    dialog.icon = __command.pluginBundle().icon()\n  } else {\n    var icon = NSImage.imageNamed('plugins')\n    if (icon) {\n      dialog.icon = icon\n    }\n  }\n\n  return {\n    document: document,\n    options: options,\n    dialog: dialog,\n  }\n}\n\n// https://github.com/electron/electron/blob/master/docs/api/dialog.md#dialogshowmessageboxbrowserwindow-options\nmodule.exports.messageBox = function messageBox(document, options) {\n  var setup = setupOptions(document, options)\n\n  return utils.runDialog(\n    setup.dialog,\n    function getResult(_dialog, returnCode) {\n      return {\n        response:\n          setup.options.buttons && setup.options.buttons.length\n            ? Number(returnCode) - 1000\n            : Number(returnCode),\n        checkboxChecked: _dialog.suppressionButton().state() == NSOnState,\n      }\n    },\n    setup.document\n  )\n}\n\n// https://github.com/electron/electron/blob/master/docs/api/dialog.md#dialogshowmessageboxsyncbrowserwindow-options\nmodule.exports.messageBoxSync = function messageBoxSync(document, options) {\n  var setup = setupOptions(document, options)\n\n  return utils.runDialogSync(\n    setup.dialog,\n    function getResult(_dialog, returnCode) {\n      return setup.options.buttons && setup.options.buttons.length\n        ? Number(returnCode) - 1000\n        : Number(returnCode)\n    },\n    setup.document\n  )\n}\n","/* eslint-disable no-not-accumulator-reassign/no-not-accumulator-reassign */\nvar utils = require('./utils')\n\nfunction setupOptions(document, options) {\n  if (\n    !document ||\n    (typeof document.isKindOfClass !== 'function' && !document.sketchObject)\n  ) {\n    options = document\n    document = undefined\n  }\n  if (!options) {\n    options = {}\n  }\n\n  var dialog = NSOpenPanel.openPanel()\n\n  if (options.title) {\n    dialog.title = options.title\n  }\n\n  if (options.defaultPath) {\n    dialog.setDirectoryURL(utils.getURL(options.defaultPath))\n  }\n\n  if (options.buttonLabel) {\n    dialog.prompt = options.buttonLabel\n  }\n\n  if (options.filters && options.filters.length) {\n    var exts = []\n    options.filters.forEach(function setFilter(filter) {\n      filter.extensions.forEach(function setExtension(ext) {\n        exts.push(ext)\n      })\n    })\n\n    dialog.allowedFileTypes = exts\n  }\n\n  var hasProperty =\n    Array.isArray(options.properties) && options.properties.length > 0\n  dialog.canChooseFiles =\n    hasProperty && options.properties.indexOf('openFile') !== -1\n  dialog.canChooseDirectories =\n    hasProperty && options.properties.indexOf('openDirectory') !== -1\n  dialog.allowsMultipleSelection =\n    hasProperty && options.properties.indexOf('multiSelections') !== -1\n  dialog.showsHiddenFiles =\n    hasProperty && options.properties.indexOf('showHiddenFiles') !== -1\n  dialog.canCreateDirectories =\n    hasProperty && options.properties.indexOf('createDirectory') !== -1\n  dialog.resolvesAliases =\n    !hasProperty || options.properties.indexOf('noResolveAliases') === -1\n  dialog.treatsFilePackagesAsDirectories =\n    hasProperty && options.properties.indexOf('treatPackageAsDirectory') !== -1\n\n  if (options.message) {\n    dialog.message = options.message\n  }\n\n  return {\n    document: document,\n    options: options,\n    dialog: dialog,\n  }\n}\n\n// https://github.com/electron/electron/blob/master/docs/api/dialog.md#dialogshowopendialogbrowserwindow-options\nmodule.exports.openDialog = function openDialog(document, options) {\n  var setup = setupOptions(document, options)\n\n  return utils.runDialog(\n    setup.dialog,\n    function getResult(_dialog, returnCode) {\n      if (returnCode != NSOKButton) {\n        return {\n          canceled: true,\n          filePaths: [],\n        }\n      }\n      var result = []\n      var urls = _dialog.URLs()\n      for (var k = 0; k < urls.length; k += 1) {\n        result.push(String(urls[k].path()))\n      }\n      return {\n        canceled: false,\n        filePaths: result,\n      }\n    },\n    setup.document\n  )\n}\n\n// https://github.com/electron/electron/blob/master/docs/api/dialog.md#dialogshowopendialogsyncbrowserwindow-options\nmodule.exports.openDialogSync = function openDialogSync(document, options) {\n  var setup = setupOptions(document, options)\n\n  return utils.runDialogSync(\n    setup.dialog,\n    function getResult(_dialog, returnCode) {\n      if (returnCode != NSOKButton) {\n        return []\n      }\n      var result = []\n      var urls = _dialog.URLs()\n      for (var k = 0; k < urls.length; k += 1) {\n        result.push(String(urls[k].path()))\n      }\n      return result\n    },\n    setup.document\n  )\n}\n","/* eslint-disable no-not-accumulator-reassign/no-not-accumulator-reassign */\nvar utils = require('./utils')\n\nfunction setupOptions(document, options) {\n  if (\n    !document ||\n    (typeof document.isKindOfClass !== 'function' && !document.sketchObject)\n  ) {\n    options = document\n    document = undefined\n  }\n  if (!options) {\n    options = {}\n  }\n\n  var dialog = NSSavePanel.savePanel()\n\n  if (options.title) {\n    dialog.title = options.title\n  }\n\n  if (options.defaultPath) {\n    // that's a path\n    dialog.setDirectoryURL(utils.getURL(options.defaultPath))\n\n    if (\n      options.defaultPath[0] === '.' ||\n      options.defaultPath[0] === '~' ||\n      options.defaultPath[0] === '/'\n    ) {\n      var parts = options.defaultPath.split('/')\n      if (parts.length > 1 && parts[parts.length - 1]) {\n        dialog.setNameFieldStringValue(parts[parts.length - 1])\n      }\n    } else {\n      dialog.setNameFieldStringValue(options.defaultPath)\n    }\n  }\n\n  if (options.buttonLabel) {\n    dialog.prompt = options.buttonLabel\n  }\n\n  if (options.filters && options.filters.length) {\n    var exts = []\n    options.filters.forEach(function setFilter(filter) {\n      filter.extensions.forEach(function setExtension(ext) {\n        exts.push(ext)\n      })\n    })\n\n    if (dialog.allowedContentTypes) {\n      // Big Sur and newer.\n      dialog.allowedContentTypes = exts.map((ext) => UTType.typeWithFilenameExtension(ext))\n    } else {\n      // Catalina and older.\n      dialog.allowedFileTypes = exts\n    }\n  }\n\n  if (options.message) {\n    dialog.message = options.message\n  }\n\n  if (options.nameFieldLabel) {\n    dialog.nameFieldLabel = options.nameFieldLabel\n  }\n\n  if (options.showsTagField) {\n    dialog.showsTagField = options.showsTagField\n  }\n\n  return {\n    document: document,\n    options: options,\n    dialog: dialog,\n  }\n}\n\n// https://github.com/electron/electron/blob/master/docs/api/dialog.md#dialogshowsavedialogbrowserwindow-options\nmodule.exports.saveDialog = function saveDialog(document, options) {\n  var setup = setupOptions(document, options)\n\n  return utils.runDialog(\n    setup.dialog,\n    function getResult(_dialog, returnCode) {\n      return {\n        canceled: returnCode != NSOKButton,\n        filePath:\n          returnCode == NSOKButton ? String(_dialog.URL().path()) : undefined,\n      }\n    },\n    setup.document\n  )\n}\n\n// https://github.com/electron/electron/blob/master/docs/api/dialog.md#dialogshowsavedialogsyncbrowserwindow-options\nmodule.exports.saveDialogSync = function saveDialogSync(document, options) {\n  var setup = setupOptions(document, options)\n\n  return utils.runDialogSync(\n    setup.dialog,\n    function getResult(_dialog, returnCode) {\n      return returnCode == NSOKButton ? String(_dialog.URL().path()) : undefined\n    },\n    setup.document\n  )\n}\n","module.exports.getURL = function getURL(path) {\n  return NSURL.URLWithString(\n    String(\n      NSString.stringWithString(path).stringByExpandingTildeInPath()\n    ).replace(/ /g, '%20')\n  )\n}\n\nmodule.exports.runDialog = function runDialog(dialog, getResult, document) {\n  if (!document) {\n    var returnCode = dialog.runModal()\n    return Promise.resolve(getResult(dialog, returnCode))\n  }\n\n  var fiber = coscript.createFiber()\n\n  var window = (document.sketchObject || document).documentWindow()\n\n  return new Promise(function p(resolve, reject) {\n    dialog.beginSheetModalForWindow_completionHandler(\n      window,\n      __mocha__.createBlock_function('v16@?0q8', function onCompletion(\n        _returnCode\n      ) {\n        try {\n          resolve(getResult(dialog, _returnCode))\n        } catch (err) {\n          reject(err)\n        }\n        NSApp.endSheet(dialog)\n        if (fiber) {\n          fiber.cleanup()\n        } else {\n          coscript.shouldKeepAround = false\n        }\n      })\n    )\n  })\n}\n\nmodule.exports.runDialogSync = function runDialog(dialog, getResult, document) {\n  var returnCode\n\n  if (!document) {\n    returnCode = dialog.runModal()\n    return getResult(dialog, returnCode)\n  }\n\n  var window = (document.sketchObject || document).documentWindow()\n\n  dialog.beginSheetModalForWindow_completionHandler(\n    window,\n    __mocha__.createBlock_function('v16@?0q8', function onCompletion(\n      _returnCode\n    ) {\n      NSApp.stopModalWithCode(_returnCode)\n    })\n  )\n\n  returnCode = NSApp.runModalForWindow(window)\n  NSApp.endSheet(dialog)\n  return getResult(dialog, returnCode)\n}\n","// TODO: async. Should probably be done with NSFileHandle and some notifications\n// TODO: file descriptor. Needs to be done with NSFileHandle\nvar Buffer = require(\"buffer\").Buffer;\nvar utils = require(\"./utils\");\nvar parseStat = utils.parseStat;\nvar fsError = utils.fsError;\nvar fsErrorForPath = utils.fsErrorForPath;\nvar encodingFromOptions = utils.encodingFromOptions;\nvar NOT_IMPLEMENTED = utils.NOT_IMPLEMENTED;\n\nmodule.exports.constants = {\n  F_OK: 0,\n  R_OK: 4,\n  W_OK: 2,\n  X_OK: 1,\n};\n\nmodule.exports.access = NOT_IMPLEMENTED(\"access\");\n\nmodule.exports.accessSync = function (path, mode) {\n  mode = mode | 0;\n  var fileManager = NSFileManager.defaultManager();\n\n  switch (mode) {\n    case 0:\n      canAccess = module.exports.existsSync(path);\n      break;\n    case 1:\n      canAccess = Boolean(Number(fileManager.isExecutableFileAtPath(path)));\n      break;\n    case 2:\n      canAccess = Boolean(Number(fileManager.isWritableFileAtPath(path)));\n      break;\n    case 3:\n      canAccess =\n        Boolean(Number(fileManager.isExecutableFileAtPath(path))) &&\n        Boolean(Number(fileManager.isWritableFileAtPath(path)));\n      break;\n    case 4:\n      canAccess = Boolean(Number(fileManager.isReadableFileAtPath(path)));\n      break;\n    case 5:\n      canAccess =\n        Boolean(Number(fileManager.isReadableFileAtPath(path))) &&\n        Boolean(Number(fileManager.isExecutableFileAtPath(path)));\n      break;\n    case 6:\n      canAccess =\n        Boolean(Number(fileManager.isReadableFileAtPath(path))) &&\n        Boolean(Number(fileManager.isWritableFileAtPath(path)));\n      break;\n    case 7:\n      canAccess =\n        Boolean(Number(fileManager.isReadableFileAtPath(path))) &&\n        Boolean(Number(fileManager.isWritableFileAtPath(path))) &&\n        Boolean(Number(fileManager.isExecutableFileAtPath(path)));\n      break;\n  }\n\n  if (!canAccess) {\n    throw new Error(\"Can't access \" + String(path));\n  }\n};\n\nmodule.exports.appendFile = NOT_IMPLEMENTED(\"appendFile\");\n\nmodule.exports.appendFileSync = function (file, data, options) {\n  if (!module.exports.existsSync(file)) {\n    return module.exports.writeFileSync(file, data, options);\n  }\n\n  var handle = NSFileHandle.fileHandleForWritingAtPath(file);\n  handle.seekToEndOfFile();\n\n  var encoding = encodingFromOptions(options, \"utf8\");\n\n  var nsdata = Buffer.from(\n    data,\n    encoding === \"NSData\" || encoding === \"buffer\" ? undefined : encoding\n  ).toNSData();\n\n  handle.writeData(nsdata);\n};\n\nmodule.exports.chmod = NOT_IMPLEMENTED(\"chmod\");\n\nmodule.exports.chmodSync = function (path, mode) {\n  var err = MOPointer.alloc().init();\n  var fileManager = NSFileManager.defaultManager();\n  fileManager.setAttributes_ofItemAtPath_error(\n    {\n      NSFilePosixPermissions: mode,\n    },\n    path,\n    err\n  );\n\n  if (err.value() !== null) {\n    throw fsErrorForPath(path, undefined, err.value());\n  }\n};\n\nmodule.exports.chown = NOT_IMPLEMENTED(\"chown\");\nmodule.exports.chownSync = NOT_IMPLEMENTED(\"chownSync\");\n\nmodule.exports.close = NOT_IMPLEMENTED(\"close\");\nmodule.exports.closeSync = NOT_IMPLEMENTED(\"closeSync\");\n\nmodule.exports.copyFile = NOT_IMPLEMENTED(\"copyFile\");\n\nmodule.exports.copyFileSync = function (path, dest, flags) {\n  var err = MOPointer.alloc().init();\n  var fileManager = NSFileManager.defaultManager();\n  fileManager.copyItemAtPath_toPath_error(path, dest, err);\n\n  if (err.value() !== null) {\n    throw fsErrorForPath(path, false, err.value());\n  }\n};\n\nmodule.exports.createReadStream = NOT_IMPLEMENTED(\"createReadStream\");\nmodule.exports.createWriteStream = NOT_IMPLEMENTED(\"createWriteStream\");\n\nmodule.exports.exists = NOT_IMPLEMENTED(\"exists\");\n\nmodule.exports.existsSync = function (path) {\n  var fileManager = NSFileManager.defaultManager();\n  return Boolean(Number(fileManager.fileExistsAtPath(path)));\n};\n\nmodule.exports.fchmod = NOT_IMPLEMENTED(\"fchmod\");\nmodule.exports.fchmodSync = NOT_IMPLEMENTED(\"fchmodSync\");\nmodule.exports.fchown = NOT_IMPLEMENTED(\"fchown\");\nmodule.exports.fchownSync = NOT_IMPLEMENTED(\"fchownSync\");\nmodule.exports.fdatasync = NOT_IMPLEMENTED(\"fdatasync\");\nmodule.exports.fdatasyncSync = NOT_IMPLEMENTED(\"fdatasyncSync\");\nmodule.exports.fstat = NOT_IMPLEMENTED(\"fstat\");\nmodule.exports.fstatSync = NOT_IMPLEMENTED(\"fstatSync\");\nmodule.exports.fsync = NOT_IMPLEMENTED(\"fsync\");\nmodule.exports.fsyncSync = NOT_IMPLEMENTED(\"fsyncSync\");\nmodule.exports.ftruncate = NOT_IMPLEMENTED(\"ftruncate\");\nmodule.exports.ftruncateSync = NOT_IMPLEMENTED(\"ftruncateSync\");\nmodule.exports.futimes = NOT_IMPLEMENTED(\"futimes\");\nmodule.exports.futimesSync = NOT_IMPLEMENTED(\"futimesSync\");\n\nmodule.exports.lchmod = NOT_IMPLEMENTED(\"lchmod\");\nmodule.exports.lchmodSync = NOT_IMPLEMENTED(\"lchmodSync\");\nmodule.exports.lchown = NOT_IMPLEMENTED(\"lchown\");\nmodule.exports.lchownSync = NOT_IMPLEMENTED(\"lchownSync\");\n\nmodule.exports.link = NOT_IMPLEMENTED(\"link\");\n\nmodule.exports.linkSync = function (existingPath, newPath) {\n  var err = MOPointer.alloc().init();\n  var fileManager = NSFileManager.defaultManager();\n  fileManager.linkItemAtPath_toPath_error(existingPath, newPath, err);\n\n  if (err.value() !== null) {\n    throw fsErrorForPath(existingPath, undefined, err.value());\n  }\n};\n\nmodule.exports.lstat = NOT_IMPLEMENTED(\"lstat\");\n\nmodule.exports.lstatSync = function (path) {\n  var err = MOPointer.alloc().init();\n  var fileManager = NSFileManager.defaultManager();\n  var result = fileManager.attributesOfItemAtPath_error(path, err);\n\n  if (err.value() !== null) {\n    throw fsErrorForPath(path, undefined, err.value());\n  }\n\n  return parseStat(result);\n};\n\nmodule.exports.mkdir = NOT_IMPLEMENTED(\"mkdir\");\n\nmodule.exports.mkdirSync = function (path, options) {\n  var mode = 0o777;\n  var recursive = false;\n  if (options && options.mode) {\n    mode = options.mode;\n  }\n  if (options && options.recursive) {\n    recursive = options.recursive;\n  }\n  if (typeof options === \"number\") {\n    mode = options;\n  }\n  var err = MOPointer.alloc().init();\n  var fileManager = NSFileManager.defaultManager();\n  fileManager.createDirectoryAtPath_withIntermediateDirectories_attributes_error(\n    path,\n    recursive,\n    {\n      NSFilePosixPermissions: mode,\n    },\n    err\n  );\n\n  if (err.value() !== null) {\n    throw new Error(err.value());\n  }\n};\n\nmodule.exports.mkdtemp = NOT_IMPLEMENTED(\"mkdtemp\");\n\nmodule.exports.mkdtempSync = function (path) {\n  function makeid() {\n    var text = \"\";\n    var possible =\n      \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\n    for (var i = 0; i < 6; i++)\n      text += possible.charAt(Math.floor(Math.random() * possible.length));\n\n    return text;\n  }\n  var tempPath = path + makeid();\n  module.exports.mkdirSync(tempPath);\n  return tempPath;\n};\n\nmodule.exports.open = NOT_IMPLEMENTED(\"open\");\nmodule.exports.openSync = NOT_IMPLEMENTED(\"openSync\");\n\nmodule.exports.read = NOT_IMPLEMENTED(\"read\");\n\nmodule.exports.readdir = NOT_IMPLEMENTED(\"readdir\");\n\nmodule.exports.readdirSync = function (path, options) {\n  var encoding = encodingFromOptions(options, \"utf8\");\n  var fileManager = NSFileManager.defaultManager();\n  var paths = fileManager.subpathsAtPath(path);\n  var arr = [];\n  for (var i = 0; i < paths.length; i++) {\n    var pathName = paths[i];\n    arr.push(encoding === \"buffer\" ? Buffer.from(pathName) : String(pathName));\n  }\n  return arr;\n};\n\nmodule.exports.readFile = NOT_IMPLEMENTED(\"readFile\");\n\nmodule.exports.readFileSync = function (path, options) {\n  var encoding = encodingFromOptions(options, \"buffer\");\n  var fileManager = NSFileManager.defaultManager();\n  var data = fileManager.contentsAtPath(path);\n  if (!data) {\n    throw fsErrorForPath(path, false);\n  }\n\n  var buffer = Buffer.from(data);\n\n  if (encoding === \"buffer\") {\n    return buffer;\n  } else if (encoding === \"NSData\") {\n    return buffer.toNSData();\n  } else {\n    return buffer.toString(encoding);\n  }\n};\n\nmodule.exports.readlink = NOT_IMPLEMENTED(\"readlink\");\n\nmodule.exports.readlinkSync = function (path) {\n  var err = MOPointer.alloc().init();\n  var fileManager = NSFileManager.defaultManager();\n  var result = fileManager.destinationOfSymbolicLinkAtPath_error(path, err);\n\n  if (err.value() !== null) {\n    throw fsErrorForPath(path, undefined, err.value());\n  }\n\n  return String(result);\n};\n\nmodule.exports.readSync = NOT_IMPLEMENTED(\"readSync\");\n\nmodule.exports.realpath = NOT_IMPLEMENTED(\"realpath\");\nmodule.exports.realpath.native = NOT_IMPLEMENTED(\"realpath.native\");\n\nmodule.exports.realpathSync = function (path) {\n  return String(\n    NSString.stringWithString(path).stringByResolvingSymlinksInPath()\n  );\n};\n\nmodule.exports.realpathSync.native = NOT_IMPLEMENTED(\"realpathSync.native\");\n\nmodule.exports.rename = NOT_IMPLEMENTED(\"rename\");\n\nmodule.exports.renameSync = function (oldPath, newPath) {\n  var err = MOPointer.alloc().init();\n  var fileManager = NSFileManager.defaultManager();\n  fileManager.moveItemAtPath_toPath_error(oldPath, newPath, err);\n\n  var error = err.value();\n\n  if (error !== null) {\n    // if there is already a file, we need to overwrite it\n    if (\n      String(error.domain()) === \"NSCocoaErrorDomain\" &&\n      Number(error.code()) === 516\n    ) {\n      var err2 = MOPointer.alloc().init();\n      fileManager.replaceItemAtURL_withItemAtURL_backupItemName_options_resultingItemURL_error(\n        NSURL.fileURLWithPath(newPath),\n        NSURL.fileURLWithPath(oldPath),\n        null,\n        NSFileManagerItemReplacementUsingNewMetadataOnly,\n        null,\n        err2\n      );\n      if (err2.value() !== null) {\n        throw fsErrorForPath(oldPath, undefined, err2.value());\n      }\n    } else {\n      throw fsErrorForPath(oldPath, undefined, error);\n    }\n  }\n};\n\nmodule.exports.rmdir = NOT_IMPLEMENTED(\"rmdir\");\n\nmodule.exports.rmdirSync = function (path) {\n  var err = MOPointer.alloc().init();\n  var fileManager = NSFileManager.defaultManager();\n  var isDirectory = module.exports.lstatSync(path).isDirectory();\n  if (!isDirectory) {\n    throw fsError(\"ENOTDIR\", {\n      path: path,\n      syscall: \"rmdir\",\n    });\n  }\n  fileManager.removeItemAtPath_error(path, err);\n\n  if (err.value() !== null) {\n    throw fsErrorForPath(path, true, err.value(), \"rmdir\");\n  }\n};\n\nmodule.exports.stat = NOT_IMPLEMENTED(\"stat\");\n\n// the only difference with lstat is that we resolve symlinks\n//\n// > lstat() is identical to stat(), except that if pathname is a symbolic\n// > link, then it returns information about the link itself, not the file\n// > that it refers to.\n// http://man7.org/linux/man-pages/man2/lstat.2.html\nmodule.exports.statSync = function (path) {\n  return module.exports.lstatSync(module.exports.realpathSync(path));\n};\n\nmodule.exports.symlink = NOT_IMPLEMENTED(\"symlink\");\n\nmodule.exports.symlinkSync = function (target, path) {\n  var err = MOPointer.alloc().init();\n  var fileManager = NSFileManager.defaultManager();\n  var result = fileManager.createSymbolicLinkAtPath_withDestinationPath_error(\n    path,\n    target,\n    err\n  );\n\n  if (err.value() !== null) {\n    throw new Error(err.value());\n  }\n};\n\nmodule.exports.truncate = NOT_IMPLEMENTED(\"truncate\");\n\nmodule.exports.truncateSync = function (path, len) {\n  var hFile = NSFileHandle.fileHandleForUpdatingAtPath(sFilePath);\n  hFile.truncateFileAtOffset(len || 0);\n  hFile.closeFile();\n};\n\nmodule.exports.unlink = NOT_IMPLEMENTED(\"unlink\");\n\nmodule.exports.unlinkSync = function (path) {\n  var err = MOPointer.alloc().init();\n  var fileManager = NSFileManager.defaultManager();\n  var isDirectory = module.exports.lstatSync(path).isDirectory();\n  if (isDirectory) {\n    throw fsError(\"EPERM\", {\n      path: path,\n      syscall: \"unlink\",\n    });\n  }\n  var result = fileManager.removeItemAtPath_error(path, err);\n\n  if (err.value() !== null) {\n    throw fsErrorForPath(path, false, err.value());\n  }\n};\n\nmodule.exports.unwatchFile = NOT_IMPLEMENTED(\"unwatchFile\");\n\nmodule.exports.utimes = NOT_IMPLEMENTED(\"utimes\");\n\nmodule.exports.utimesSync = function (path, aTime, mTime) {\n  var err = MOPointer.alloc().init();\n  var fileManager = NSFileManager.defaultManager();\n  var result = fileManager.setAttributes_ofItemAtPath_error(\n    {\n      NSFileModificationDate: aTime,\n    },\n    path,\n    err\n  );\n\n  if (err.value() !== null) {\n    throw fsErrorForPath(path, undefined, err.value());\n  }\n};\n\nmodule.exports.watch = NOT_IMPLEMENTED(\"watch\");\nmodule.exports.watchFile = NOT_IMPLEMENTED(\"watchFile\");\n\nmodule.exports.write = NOT_IMPLEMENTED(\"write\");\n\nmodule.exports.writeFile = NOT_IMPLEMENTED(\"writeFile\");\n\nmodule.exports.writeFileSync = function (path, data, options) {\n  var encoding = encodingFromOptions(options, \"utf8\");\n\n  var nsdata = Buffer.from(\n    data,\n    encoding === \"NSData\" || encoding === \"buffer\" ? undefined : encoding\n  ).toNSData();\n\n  nsdata.writeToFile_atomically(path, true);\n};\n\nmodule.exports.writeSync = NOT_IMPLEMENTED(\"writeSync\");\n","module.exports.parseStat = function parseStat(result) {\n  return {\n    dev: String(result.NSFileDeviceIdentifier),\n    // ino: 48064969, The file system specific \"Inode\" number for the file.\n    mode: result.NSFileType | result.NSFilePosixPermissions,\n    nlink: Number(result.NSFileReferenceCount),\n    uid: String(result.NSFileOwnerAccountID),\n    gid: String(result.NSFileGroupOwnerAccountID),\n    // rdev: 0, A numeric device identifier if the file is considered \"special\".\n    size: Number(result.NSFileSize),\n    // blksize: 4096, The file system block size for i/o operations.\n    // blocks: 8, The number of blocks allocated for this file.\n    atimeMs:\n      Number(result.NSFileModificationDate.timeIntervalSince1970()) * 1000,\n    mtimeMs:\n      Number(result.NSFileModificationDate.timeIntervalSince1970()) * 1000,\n    ctimeMs:\n      Number(result.NSFileModificationDate.timeIntervalSince1970()) * 1000,\n    birthtimeMs:\n      Number(result.NSFileCreationDate.timeIntervalSince1970()) * 1000,\n    atime: new Date(\n      Number(result.NSFileModificationDate.timeIntervalSince1970()) * 1000 + 0.5\n    ), // the 0.5 comes from the node source. Not sure why it's added but in doubt...\n    mtime: new Date(\n      Number(result.NSFileModificationDate.timeIntervalSince1970()) * 1000 + 0.5\n    ),\n    ctime: new Date(\n      Number(result.NSFileModificationDate.timeIntervalSince1970()) * 1000 + 0.5\n    ),\n    birthtime: new Date(\n      Number(result.NSFileCreationDate.timeIntervalSince1970()) * 1000 + 0.5\n    ),\n    isBlockDevice: function () {\n      return result.NSFileType === NSFileTypeBlockSpecial;\n    },\n    isCharacterDevice: function () {\n      return result.NSFileType === NSFileTypeCharacterSpecial;\n    },\n    isDirectory: function () {\n      return result.NSFileType === NSFileTypeDirectory;\n    },\n    isFIFO: function () {\n      return false;\n    },\n    isFile: function () {\n      return result.NSFileType === NSFileTypeRegular;\n    },\n    isSocket: function () {\n      return result.NSFileType === NSFileTypeSocket;\n    },\n    isSymbolicLink: function () {\n      return result.NSFileType === NSFileTypeSymbolicLink;\n    },\n  };\n};\n\nvar ERRORS = {\n  EPERM: {\n    message: \"operation not permitted\",\n    errno: -1,\n  },\n  ENOENT: {\n    message: \"no such file or directory\",\n    errno: -2,\n  },\n  EACCES: {\n    message: \"permission denied\",\n    errno: -13,\n  },\n  ENOTDIR: {\n    message: \"not a directory\",\n    errno: -20,\n  },\n  EISDIR: {\n    message: \"illegal operation on a directory\",\n    errno: -21,\n  },\n};\n\nfunction fsError(code, options) {\n  var error = new Error(\n    code +\n      \": \" +\n      ERRORS[code].message +\n      \", \" +\n      (options.syscall || \"\") +\n      (options.path ? \" '\" + options.path + \"'\" : \"\")\n  );\n\n  Object.keys(options).forEach(function (k) {\n    error[k] = options[k];\n  });\n\n  error.code = code;\n  error.errno = ERRORS[code].errno;\n\n  return error;\n}\n\nmodule.exports.fsError = fsError;\n\nmodule.exports.fsErrorForPath = function fsErrorForPath(\n  path,\n  shouldBeDir,\n  err,\n  syscall\n) {\n  var fileManager = NSFileManager.defaultManager();\n  var doesExist = fileManager.fileExistsAtPath(path);\n  if (!doesExist) {\n    return fsError(\"ENOENT\", {\n      path: path,\n      syscall: syscall || \"open\",\n    });\n  }\n  var isReadable = fileManager.isReadableFileAtPath(path);\n  if (!isReadable) {\n    return fsError(\"EACCES\", {\n      path: path,\n      syscall: syscall || \"open\",\n    });\n  }\n  if (typeof shouldBeDir !== \"undefined\") {\n    var isDirectory = require(\"./index\").lstatSync(path).isDirectory();\n    if (isDirectory && !shouldBeDir) {\n      return fsError(\"EISDIR\", {\n        path: path,\n        syscall: syscall || \"read\",\n      });\n    } else if (!isDirectory && shouldBeDir) {\n      return fsError(\"ENOTDIR\", {\n        path: path,\n        syscall: syscall || \"read\",\n      });\n    }\n  }\n  return new Error(err || \"Unknown error while manipulating \" + path);\n};\n\nmodule.exports.encodingFromOptions = function encodingFromOptions(\n  options,\n  defaultValue\n) {\n  return options && options.encoding\n    ? String(options.encoding)\n    : options\n    ? String(options)\n    : defaultValue;\n};\n\nmodule.exports.NOT_IMPLEMENTED = function NOT_IMPLEMENTED(name) {\n  return function () {\n    throw new Error(\n      \"fs.\" +\n        name +\n        \" is not implemented yet. If you feel like implementing it, any contribution will be gladly accepted on https://github.com/skpm/fs\"\n    );\n  };\n};\n","/* from https://github.com/taylorhakes/promise-polyfill */\n\nfunction promiseFinally(callback) {\n  var constructor = this.constructor;\n  return this.then(\n    function(value) {\n      return constructor.resolve(callback()).then(function() {\n        return value;\n      });\n    },\n    function(reason) {\n      return constructor.resolve(callback()).then(function() {\n        return constructor.reject(reason);\n      });\n    }\n  );\n}\n\nfunction noop() {}\n\n/**\n * @constructor\n * @param {Function} fn\n */\nfunction Promise(fn) {\n  if (!(this instanceof Promise))\n    throw new TypeError(\"Promises must be constructed via new\");\n  if (typeof fn !== \"function\") throw new TypeError(\"not a function\");\n  /** @type {!number} */\n  this._state = 0;\n  /** @type {!boolean} */\n  this._handled = false;\n  /** @type {Promise|undefined} */\n  this._value = undefined;\n  /** @type {!Array<!Function>} */\n  this._deferreds = [];\n\n  doResolve(fn, this);\n}\n\nfunction handle(self, deferred) {\n  while (self._state === 3) {\n    self = self._value;\n  }\n  if (self._state === 0) {\n    self._deferreds.push(deferred);\n    return;\n  }\n  self._handled = true;\n  Promise._immediateFn(function() {\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n      return;\n    }\n    var ret;\n    try {\n      ret = cb(self._value);\n    } catch (e) {\n      reject(deferred.promise, e);\n      return;\n    }\n    resolve(deferred.promise, ret);\n  });\n}\n\nfunction resolve(self, newValue) {\n  try {\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n    if (newValue === self)\n      throw new TypeError(\"A promise cannot be resolved with itself.\");\n    if (\n      newValue &&\n      (typeof newValue === \"object\" || typeof newValue === \"function\")\n    ) {\n      var then = newValue.then;\n      if (newValue instanceof Promise) {\n        self._state = 3;\n        self._value = newValue;\n        finale(self);\n        return;\n      } else if (typeof then === \"function\") {\n        doResolve(then.bind(newValue), self);\n        return;\n      }\n    }\n    self._state = 1;\n    self._value = newValue;\n    finale(self);\n  } catch (e) {\n    reject(self, e);\n  }\n}\n\nfunction reject(self, newValue) {\n  self._state = 2;\n  self._value = newValue;\n  finale(self);\n}\n\nfunction finale(self) {\n  if (self._state === 2 && self._deferreds.length === 0) {\n    Promise._immediateFn(function() {\n      if (!self._handled) {\n        Promise._unhandledRejectionFn(self._value, self);\n      }\n    });\n  }\n\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\n    handle(self, self._deferreds[i]);\n  }\n  self._deferreds = null;\n}\n\n/**\n * @constructor\n */\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === \"function\" ? onFulfilled : null;\n  this.onRejected = typeof onRejected === \"function\" ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, self) {\n  var done = false;\n  try {\n    fn(\n      function(value) {\n        if (done) {\n          Promise._multipleResolvesFn(\"resolve\", self, value);\n          return;\n        }\n        done = true;\n        resolve(self, value);\n      },\n      function(reason) {\n        if (done) {\n          Promise._multipleResolvesFn(\"reject\", self, reason);\n          return;\n        }\n        done = true;\n        reject(self, reason);\n      }\n    );\n  } catch (ex) {\n    if (done) {\n      Promise._multipleResolvesFn(\"reject\", self, ex);\n      return;\n    }\n    done = true;\n    reject(self, ex);\n  }\n}\n\nPromise.prototype[\"catch\"] = function(onRejected) {\n  return this.then(null, onRejected);\n};\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  // @ts-ignore\n  var prom = new this.constructor(noop);\n\n  handle(this, new Handler(onFulfilled, onRejected, prom));\n  return prom;\n};\n\nPromise.prototype[\"finally\"] = promiseFinally;\n\nPromise.all = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!Array.isArray(arr)) {\n      return reject(new TypeError(\"Promise.all accepts an array\"));\n    }\n\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      try {\n        if (val && (typeof val === \"object\" || typeof val === \"function\")) {\n          var then = val.then;\n          if (typeof then === \"function\") {\n            then.call(\n              val,\n              function(val) {\n                res(i, val);\n              },\n              reject\n            );\n            return;\n          }\n        }\n        args[i] = val;\n        if (--remaining === 0) {\n          resolve(args);\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.resolve = function(value) {\n  if (value && typeof value === \"object\" && value.constructor === Promise) {\n    return value;\n  }\n\n  return new Promise(function(resolve) {\n    resolve(value);\n  });\n};\n\nPromise.reject = function(value) {\n  return new Promise(function(resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!Array.isArray(arr)) {\n      return reject(new TypeError(\"Promise.race accepts an array\"));\n    }\n\n    for (var i = 0, len = arr.length; i < len; i++) {\n      Promise.resolve(arr[i]).then(resolve, reject);\n    }\n  });\n};\n\n// Use polyfill for setImmediate for performance gains\nPromise._immediateFn = setImmediate;\n\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(err, promise) {\n  if (\n    typeof process !== \"undefined\" &&\n    process.listenerCount &&\n    (process.listenerCount(\"unhandledRejection\") ||\n      process.listenerCount(\"uncaughtException\"))\n  ) {\n    process.emit(\"unhandledRejection\", err, promise);\n    process.emit(\"uncaughtException\", err, \"unhandledRejection\");\n  } else if (typeof console !== \"undefined\" && console) {\n    console.warn(\"Possible Unhandled Promise Rejection:\", err);\n  }\n};\n\nPromise._multipleResolvesFn = function _multipleResolvesFn(\n  type,\n  promise,\n  value\n) {\n  if (typeof process !== \"undefined\" && process.emit) {\n    process.emit(\"multipleResolves\", type, promise, value);\n  }\n};\n\nmodule.exports = Promise;\n","module.exports = \"file://\" + String(context.scriptPath).split(\".sketchplugin/Contents/Sketch\")[0] + \".sketchplugin/Contents/Resources/_webpack_resources/1ebbd3084ce348705d20ad4f97ac0366.mjs\";","let excelDivider = ' / '\nlet sketchSymbolDivider = '/'\nlet artboardPrefix = 'ARTBOARD: '\nlet translateLayerPrefix = '#'\n\nmodule.exports = {\n  excelDivider,\n  sketchSymbolDivider,\n  artboardPrefix,\n  translateLayerPrefix\n}\n","import sketch from 'sketch'\nimport fs from '@skpm/fs'\nimport dialog from '@skpm/dialog'\n\nvar UI = require('sketch/ui')\nvar constants = require('./constants')\nvar path = require('path')\nvar XLSX = require('xlsx')\n\nlet document = sketch.getSelectedDocument()\nvar contentLanguage = 'en-US' // set en-US as standard\nvar renameTextLayersFlag = false\nvar generatedFileData = []\nvar duplicateKeys = 0\n\nconsole.log('2057')\n\nclass ExcelContent {\n  constructor (key, value) {\n    this.key = key\n    this.value = value\n  }\n}\n\nexport default function () {\n  if (document.pages) {\n    // ask for language\n    if (askContentLanguage() && askRenameTextLayers()) {\n      for (let page of document.pages) {\n        // Don't add Symbols page\n        if (page.name !== 'Symbols') {\n          if (renameTextLayersFlag) {\n            renameTextLayers(page)\n          }\n          getPageContent(page)\n        }\n      }\n      saveToFile()\n    }\n  } else {\n    console.log('Document contains no pages')\n    sketch.UI.message('Document contains no pages')\n  }\n}\n\nfunction getPageContent (page) {\n  console.log('getPageContent: ', page.name)\n\n  for (let layer of page.layers) {\n    findContentLayer(layer)\n  }\n}\n\nfunction findContentLayer (layer) {\n  switch (layer.type) {\n    case String(sketch.Types.SymbolInstance):\n      contentFromSymbolLayer(layer)\n      break\n    case String(sketch.Types.Text):\n      contentFromTextLayer(layer)\n      break\n    case String(sketch.Types.Artboard):\n      contentFromArtboardLayer(layer)\n      break\n    default:\n      // check for groups and combined layers\n      if (layer.layers) {\n        for (let eachLayer of layer.layers) {\n          findContentLayer(eachLayer)\n        }\n      }\n  }\n}\n\nfunction contentFromSymbolLayer (symbol) {\n  console.log('contentFromSymbolLayer: ', symbol.name)\n  if (symbol.name.charAt(0) === constants.translateLayerPrefix) {\n    for (let override of symbol.overrides) {\n      if (override.property === 'stringValue') {\n        // console.log('stringValue')\n        console.log(symbol.id, override.id, override.path, symbol.name)\n        let key = symbol.name + constants.excelDivider + layerNamesFromPath(override.path)\n        addToSheet(key, override.value)\n      }\n    }\n  }\n}\n\nfunction contentFromTextLayer (layer) {\n  console.log('contentFromTextLayer', layer.name, layer.getParentArtboard().name)\n  if (layer.name.charAt(0) === constants.translateLayerPrefix) {\n    addToSheet(layer.name, layer.text)\n  }\n}\n\nfunction contentFromArtboardLayer (artboard) {\n  console.log('contentFromArtboardLayer: ', artboard.name)\n  // add artboard marker to sheet\n  let artboardDivider = 'ARTBOARD: ' + artboard.name\n  addToSheet('', '') // add empty row\n  addToSheet(artboardDivider, '')\n\n  // console.log('artboard layers: ' + artboard.layers.length)\n  for (let layer of artboard.layers) {\n    // console.log(layer.name, layer.type)\n    findContentLayer(layer)\n  }\n}\n\nfunction addToSheet (key, value) {\n  // TODO: Add checkbox to skip duplicate keys\n  // check if key already exists, except for empty row\n  // if (generatedFileData.filter(excelContent => (excelContent.key === key)).length && key !== '') {\n  if (false) {\n    // skip\n    duplicateKeys += 1\n  } else {\n    // add to array\n    let keyValue = new ExcelContent(key, value)\n    generatedFileData.push(keyValue)\n  }\n  // console.log('Adding to sheet: ' + key, value)\n}\n\nfunction renameTextLayers (page) {\n  console.log('renameTextLayers: ', page.name)\n  for (let layer of page.layers) {\n    findTextAndSymbolLayer(layer)\n  }\n}\n\nfunction findTextAndSymbolLayer (layer) {\n  switch (layer.type) {\n    case String(sketch.Types.SymbolInstance):\n      // TODO: Check if symbol layer has text content\n      if (layer.name.charAt(0) !== '#') {\n        layer.name = constants.translateLayerPrefix + layer.name\n      }\n      break\n    case String(sketch.Types.Text):\n      if (layer.name.charAt(0) !== '#') {\n        layer.name = constants.translateLayerPrefix + layer.name\n      }\n      break\n    default:\n      // check for artboards, groups and combined layers\n      if (layer.layers) {\n        for (let eachLayer of layer.layers) {\n          findTextAndSymbolLayer(eachLayer)\n        }\n      }\n  }\n}\n\nfunction askRenameTextLayers () {\n  var returnValue = false\n  UI.getInputFromUser(\n    `Prefix text and symbol layers with '${constants.translateLayerPrefix}'?`,\n    {\n      type: UI.INPUT_TYPE.selection,\n      possibleValues: ['yes', 'no'],\n      initialValue: 'no'\n    },\n    (err, value) => {\n      if (err) {\n        console.log('pressed cancel')\n        // most likely the user canceled the input\n        return\n      }\n      if (value !== 'null' && value.length > 1) {\n        renameTextLayersFlag = value === 'yes'\n        console.log('set renameTextLayersFlag', renameTextLayersFlag)\n        returnValue = true\n      }\n    }\n  )\n  return returnValue\n}\n\nfunction askContentLanguage () {\n  var returnValue = false\n  UI.getInputFromUser(\n    'Current document language?',\n    {\n      initialValue: 'en-US'\n    },\n    (err, value) => {\n      if (err) {\n        console.log('pressed cancel')\n        // most likely the user canceled the input\n        return\n      }\n      if (value !== 'null' && value.length > 1) {\n        contentLanguage = value\n        console.log('set contentLanguage', contentLanguage)\n        returnValue = true\n      }\n    }\n  )\n  return returnValue\n}\n\nfunction saveToFile () {\n  var date = new Date()\n  var dateFormat = date.getFullYear() + '' + (date.getMonth() + 1) + '' + date.getDate()\n\n  let name = decodeURI(path.basename(document.path, '.sketch'))\n  let contentFileName = name + '-content-' + dateFormat + '.xlsx'\n  var defaultPath = path.join(path.dirname(document.path), contentFileName)\n  console.log(defaultPath)\n  var filePath = dialog.showSaveDialog({\n    filters: [\n      { name: 'Excel', extensions: ['xlsx'] }\n    ],\n    defaultPath: defaultPath\n  })\n\n  // check if user want to save the file\n  if (filePath) {\n    // console.log(generatedFileData)\n    let book = XLSX.utils.book_new()\n    let sheet = XLSX.utils.json_to_sheet(generatedFileData)\n    sheet['B1'].v = contentLanguage\n    XLSX.utils.book_append_sheet(book, sheet, 'content')\n\n    let content = XLSX.write(book, { type: 'buffer', bookType: 'xlsx', bookSST: false })\n    fs.writeFileSync(filePath, content, { encoding: 'binary' })\n    console.log('File created as:', filePath)\n\n    // done\n    console.log('Completed. Duplicates: ' + duplicateKeys + ' File saved as ' + path.basename(filePath))\n    sketch.UI.message('Content file generated. Found ' + duplicateKeys + ' duplicated keys. File saved as ' + decodeURI(path.basename(filePath)))\n  }\n}\n\n// **********************\n//   Helper methods\n// **********************\n// TODO: function duplicated\nfunction layerNamesFromPath (path) {\n  var layerNames = []\n  let layerIDs = path.split(constants.sketchSymbolDivider)\n  for (let layerID of layerIDs) {\n    let layer = document.getLayerWithID(layerID)\n\n    // TODO: Sketch libraries not supported.\n    if (layer) {\n      let layerName = layer.name\n      layerNames.push(layerName)\n    }\n  }\n  // console.log(layerNames.join(constants.excelDivider))\n  return layerNames.join(constants.excelDivider)\n}\n","module.exports = require(\"buffer\");","module.exports = require(\"path\");","module.exports = require(\"sketch\");","module.exports = require(\"sketch/ui\");"],"sourceRoot":""}